# Todo
- PR DNS records.
-
- MongoDB / Vault stuff PR fixen
- Feedback van User Sync PR
- Attribute sync, prefixes + diff calculation proposal.
-
-
-
- # Monday 23
-
- Naming strategy; implementation. for fields.
- Can we delete a profile? What are the constraints for that?
	-
- Diff calculation thingy.
-
-
- First PR is open, doesn't contain all fields yet but we will extend.
- Focus of this week is to improve said setup and get it done for first milestone, which is then syncing users.
-
-
-
- ## Talk mett Enric
- user details is omitted on rabbit, goes to bridge, gets batched, gets into profile, event is omitted to braze.
- what happens on user deletion; What would they like us to do.
- Soft delete? Delete everything.
-
- Complex function;
- Utility for identifying attributes;
- Maps.difference();
-
- `getAlltATtributes` thing.
- `externalId` is special. A simple map is not good because we need to enforce constraints.
- Just send a map.
-
- as request we got from the client. We transform it into what the API expects.
-
-
-
- ## Monday 16
- First epic is done, apart from MongoDB.
- MongoDB will be picked up this week.
-
- First API calls are done.
-
- Focus for this week; user details syncing.
	- So I need data on what fields we need.
- Abstraction layer.
- Maybe second one?
-
- Important; next week I'll be at a conference.
- Week after that I'll need time to prepare as well.
- Next week Monday I'll be on a plane. Can we reschedule?
-
- ---
- Adding / grouping, naming convention
-
-
-
-
-
-
-
-
- ## Other
-
- Maybe Docker mock?
- Otherwise mockserver API.
-
- `bridge-support` uses MongoDB, queues , de-duplicates and calls DataListAPI to Selligent.
- Saves all the events, kind of buffers in between.
-
- Handler for when it's ready to process. See what the difference is and only update that.
-
- We'll focus on outbound.
-
- Braze is orchestrator. operator setup and define flows, with call back to picnicsystems., trigger stuff. Braze will also be executor of communications.
- If need logic before final execution, go to rule engine.
-
- general purpose client that handles most stuff regarding formats; authentications and such.
-
- outbound, make queue
-
- SelligentClient does combine some "lowlevel" API calls in some more convenient functions.
	- Like the pagination example of search, where it will return a Flux, to make it more convenient.
-
-
- # TODO?
- Relaxed release!?
-
-
- Customer Team
	- Cristina
	- Penny
- TAR
	- Enric
	- Frans
	- Dirk
- Infra
- Mobile excellence
-
- Wij moeten de kritische vragen gaan stellen.
	- Welke journeys zijn afhankelijk van welke datasource.
-
- Update maandagen
	- Wat is de status?
	- Wat hebben we nodig?
	- Wat gaan we nu oppakken? / aanpakken? Komende week.
-
- Beslissingen vast leggen en delen.
-
-
- Pyramid principle: https://medium.com/lessons-from-mckinsey/the-pyramid-principle-f0885dd3c5c7
-
-
- Samenvatting Frans:
- Project learning goals Rick
	- Hee sees this project as a nice "Product team field trip"
		- Experience usage of PSM tools in a real project in a real team. Set-up green field project end-to-end with own tools.
	- [@Rick](https://teampicnic.slack.com/team/U01S2HXUEGP) will keep a list for himself of practical stuff in using PSM to take back to JPLA
	- [@Enric Sala](https://teampicnic.slack.com/team/UF411D8P2) Actively invite Rick any topics and discussions in TAR team around PSM and Dev tooling. He likes to think along ![:+1::skin-tone-3:](https://a.slack-edge.com/production-standard-emoji-assets/14.0/google-medium/1f44d-1f3fc.png)
	- Having the Product team experience: Building a Product, Writing code, Testing, etc.
	- [@Rick](https://teampicnic.slack.com/team/U01S2HXUEGP) wants to practice stakeholder management:
	- Customer team - Mostly managing communication and workflow for [@Penny Steenbeek](https://teampicnic.slack.com/team/U040M739PQB).
	- [@Rick](https://teampicnic.slack.com/team/U01S2HXUEGP) will prepare the state of tech for the Monday kick-off and be explicit on the investigation work Penny can do to unblock.
	- To limit scope, [@Frans](https://teampicnic.slack.com/team/U6H0C31UK) to pick up the work with Infra / Security / Mobile Excellence
	- [@Rick](https://teampicnic.slack.com/team/U01S2HXUEGP) wants to practice communication skills:
	- Verbal updates on Monday
	- Written updates in [#int-braze-migration](https://teampicnic.slack.com/archives/C04SXF9LZ33) --> [@Frans](https://teampicnic.slack.com/team/U6H0C31UK) to coach on message & Pyramid principle
	- Ad-hoc questions --> In [sys-targeteers](https://teampicnic.slack.com/archives/CUJ8CK258) so
-
- # Prep Monday 9 oct
- The dev setup is almost there. Monday will probably be the day to do an actual deployment.
-
- First queue setup for user details. Later wil be easier to add. Need to get insight into all lthe data sources we need to add. Priorities for that.
-
- Things we need to do:
	- Focus on improved data structures.
		- Can we do nested data structures
	- What should be the priority for data that has to be ingested, to be able to start creating campaigns in Braze?
-
- ## Update
- Current state of tech
	- New project is setup.
	- Currently working on all the (dev) tools we need to use it.
	- Infra related things.
-
- Whats goal of this week?
	- Do actual deployments of the base application either today or tomorrow.
	- Work on setting up the first data ingestion.
		- We start with the user details
	- Think about improving data structures, based on the answers of Braze.
-
-
- What can others do to unblock?
	- Get insight into the priorities of all the different data sources we need to have for Braze. Which data sources do we sync first such that we can unblock the migration of the most campaigns early on.
	- Go over the list and check what is interesting. https://picnic.atlassian.net/wiki/spaces/RULE/pages/2324398376/UserDetailsEvent
-
-
- ~~Ask timeline for Mongo.~~
- ~~Ask 7?~~
-
- ## Questions
- Collection of entities? not linked to a customer but we can use for quering. Indirect lookup via an entity.
- User slots, doesn't exist, needs to be computed.
- Clarify how the data about the devices (data) is updated.
-
- ## Questions
- ### General usage
	- What is the preferred way of updating objects via your API (also w.r.t. pricing)? Should we update specific fields within an object or can we just post the whole (e.g.) updated user object?
	- Can we store only flat data structures or can we have nested data structures?
		- Are there limitations?
		- How would that work?
		- Advantages / disadvantages of using nested data structures
			- Especially w.r.t. using the objects when creating campaigns. Can we easily go over the nested structures when targeting audiences or creating conditions. For instance, if we list all the orders of a user as an array on the user document, can we easily select all the users with more than 5 orders in the last 4 weeks?
	- How is the date and datetime support in Braze? What date time format does Braze use? And with what precision? And how can we process time based data in journeys? For instance, select customers that were in the app between 10 and 5 days ago.
	- Is there any kind of schema enforcing in Braze on the data that is sent by us?
-
- ### User syncing
- What does a user document look like on the Braze side?
	- Any mandatory fields that the system requires?
	- How do we add our own fields?
	- How are user devices synced / saved to Braze?
		- Does the mobile SDK support this out of the box?
		- What updates are done by the SDK?
	- Can you walk us through setting up a simple user document and using that with the API?
-
- ### Non user syncing
	- Can you walk us through setting up a non customer data source?
		- Or rather; for now explain how we would go about that?
	- How do we sync non customer data to Braze and how do we process that in journeys? For instance, we have delivery slots linked to regions and separately regions linked to customers. However, we don't expose or pre-calculate the entire user-slots mapping. Can we sync relational data like this and traverse it to end up with user slots?
	-
- ### Other stuff
	-
-
- ### Notes for their questions
- Hoe kunnen we onze structuren doen?
- Voorstel intern daarna met thun bespreken.
- Hoe process je nested structure nin een njourney?
- Zijn er restricties?
-
- Audience filter condities die we kunnen doen.
-
-
-
- # Answers
- What is the preferred way of updating objects via your API (also w.r.t. pricing)? Should we update specific fields within an object or can we just post the whole (e.g.) updated user object?
	- User profile consists of:
		- Attributes
		- Events
		- Purchases
	- `99df9a4f-ed66-4d0f-a1bf-0700be250ac2` --> Put it in Vault
	  `[https://rest.iad-03.braze.com](https://rest.iad-03.braze.com/)`
	- POST Track:user
	- externalID is unique identifier
- Can we store only flat data structures or can we have nested data structures?
	- Only one level deep for array, but type:dog can also be an array
		- Level of nesting for custom events. Stored as a string value.
	- Replace something, better to remove and add. Remove singular element.
	- Updating to null and not present; is the same.
- Are there limitations?
- How implementing these nested data structures work?
- Advantages / disadvantages of using nested data structures
- Especially w.r.t. using the objects when creating campaigns. Can we easily go over the nested structures when targeting audiences or creating conditions. For instance, if we list all the orders of a user as an array on the user document, can we easily select all the users with more than 5 orders in the last 4 weeks?
- How is the date and datetime support in Braze? What date time format does Braze use? And with what precision? And how can we process time based data in journeys? For instance, select customers that were in the app between 10 and 5 days ago.
	- ISO-8601
- Is there any kind of schema enforcing in Braze on the data that is sent by us?
- **User syncing**
- What does a user document look like on the Braze side?
	- You can do whatever you want.
	- Mongo :D
	- Experiment with timezone;l
- Any mandatory fields that the system requires? How do we add our own fields?
	- No manage it on your own. You can enforce some things by "blacklisting".
- How are user devices synced / saved to Braze?
	- SDK: Session for the first time; braze generate GUID; data to braze; it passes by deviceID. User ID; attaches device to that external ID.
- Does the mobile SDK support this out of the box?
- What updates are done by the SDK?
- Is there any syncing for device info needed from our side through the API?
- Can you walk us through setting up a simple user document and using that with the API?
- **Non user syncing**
- Can you walk us through setting up a non customer data source?
- How do we process that in journeys?
- For instance, we have delivery slots linked to regions and separately regions linked to customers. However, we don't expose or pre-calculate the entire user-slots mapping. Can we sync relational data like this and traverse it to end up with user slots?
-
- We can send in the delta instead of whole objects.
- Segmentation; drag and drop. and ...
- Top level property where you filter on; only in SQL, not drag and drop.
- Unlimited sending of data. Will be used for SQL stuff; if you want to have it in the data segmentation and all then you need to decide to save it as "cold" storage. Instead of the lifetime of a campaign, will work as part of the "data allocation".
- Segment extensions.
- Have a count if you want to use x amount of events before trigger.
-
- ## Code TODO
- Metrics gauge instrument like Selligent.
-